<div dir="rtl" lang="he">

# קו - שלב א

קו (coup - הפיכה) הוא משחק קופסה עבור 2-6 שחקנים המשחקים אחד נגד השני כדי להישאר אחרונים על המגרש.

במטלה זו נממש חלק מחוקי המשחק.

## חוקי המשחק
בתחילת המשחק כל שחקן שולף שני קלפים מהערימה ומשאיר אותם חבויים אצלו. כל קלף מתאר  תפקיד אותו יכול לממש השחקן (אין צורך לבחור, כל שחקן משחק 2 תפקידים במקביל).  במרכז השולחן ישנה קופה של מטבעות. כל שחקן בתורו משחק לפי התפקידים אליהם משתייך (פירוט התפקידים בהמשך) ויכול לקחת מטבעות בהתאם. מטרת המשחק היא להוציא לפועל "הפיכות" ולהדיח שחקנים אחרים מתפקידם. השחקן האחרון שנשאר בעל תפקיד מנצח.
 
## השחקן

לכל שחקן יש שם משלו. 

בכל תור יכול שחקן, בלי קשר לתפקידו, לבצע את אחת מהפעולות הבאות:

1. שכר - `income` לקחת מטבע מהערימה.  
לפעולה זו אין עלות, אין פעולות נגדיות והשחקן מרוויח מטבע בודד.

2. שכר כפול - `foreign_aid` - לקחת שני מטבעות מהערימה.  
לפעולה זו אין עלות והיא מזכה את השחקן בשני מטבעות. אבל, ישנו תפקיד במשחק היכול לחסום את הפעולה הזו. אם השחקן נחסם בעת שמנסה לקחת שכר כפול, תורו מסתיים.

3. הפיכה - `coup` להדיח שחקן יריב מתפקיד אחד.  
עלות פעולה זו 7 מטבעות, אין לה פעולות נגדיות והיא מסתיימת בכך שהשחקן עליו הופעלה הפעולה מחוייב לחשוף קלף תפקיד אחד ובכך מודח מהתפקיד.

כל פעולה צריכה לעדכן את מספר התפקידים אותם מחזיק השחקן ואת מספר המטבעות שלו בהתאם.  
אם הפעולה לא חוקית, יש לזרוק חריגה מתאימה.

בנוסף, יש לממש את השיטות הבאות:

*  `role` - פונקציה המחזירה את התפקידים של השחקן (ראו רשימת התפקידים למטה), לצורך תצוגה.
*  `take_cards` - לקיחת קלפים כלשהם. פעולה זו מדמה את התהליך שבו השחקן מקבל קלפים מהקופה בתחילת המשחק.

* אין צורך לבדוק את התקינות של שיטה זו. בפרט: אין צורך לבדוק שלא נותנים קלף פעמיים, וכד'. השיטה תמיד מצליחה.


## תפקידים

ישנם תפקידים שונים של שחקנים, שיש להם כישורים מיוחדים:

1. דוקס - `Duke`: יכול לקחת שלושה מטבעות מהקופה מבלי שאף שחקן יכול למנוע ממנו. בנוסף, הדוקס יכול לחסום פעולת שכר כפול. השחקן שנחסם מחזיר את שני הקלפים לקופה ותורו מסתיים.

1. מתנקש - `Assassin`: יכול להדיח שחקן מתפקידו בעלות 3 מטבעות בלבד (במקום 7). אולם, יש תפקיד היכול למנוע פעולה זו מהמתנקש. אם מתנקש נחסם בזמן ניסיון התנקשות הוא מפסיד את תורו.

1. שגריר - `Ambassador`: יכול להחליף תפקיד אחד שהוא רוצה לכל תפקיד אחר. בנוסף, השגריר יכול למנוע את פעולת הגניבה המפורטת בהמשך.

1. קפטן - `Captain`: יכול לגנוב 2 מטבעות משחקן אחר. פעולה זו יכולה להיחסם ע"י שגריר או ע"י קפטן אחר. (ז"א גם קפטן יכול לחסום גניבה, בדומה לשגריר).

1. רוזנת - `Contessa`: יכולה לחסום את פעולת ההתנקשות.

## המשחק

יש לממש את השיטות הבאות:

1. תור מי עכשיו? - `turn` השיטה מדפיסה את שם השחקן שתורו עכשיו


הערות:

* יכולים להיות שני שחקנים או יותר בעלי אותו תפקיד - לא קורה שום דבר מיוחד במצב זה.

* אם שחקן מחזיק 10 מטבעות בתחילת תורו, הוא חייב לבצע הפיכה באותו תור

* פעולות חסימה לא צריכות להמתין לתור השחקן החוסם ולא מבזבזות לו תור אלא מתבצעות "בזמן אמת". במשחק שלנו לא נממש תגובות "בזמן אמת" לכן ממשו את הפתרון הבא:  
שחקן שביצע פעולה שניתנת לחסימה, ניתן לחסום את הפעולה שלו עד שהגיע תורו לשחק שוב.  
דוגמה:  
שחקן 1 לקח שכר כפול ושחקן 3 מחזיק בקלף דוקס. שחקן 3 לא צריך לחכות לתורו כדי לחסום את שחקן 1. אבל, אם הגיע שוב תורו של שחקן 1, שחקן 3 כבר לא יכול לבקש ממנו להחזיר את המטבעות לקופה.


**חלק א**: יש לכתוב: 

* קובץ כותרת הכולל את כל הפונקציות הדרושות (ללא מימוש). שימו לב: הכותרות צריכות להיות נכונות בהתאם למה שנלמד בהרצאות - מומלץ לחזור על החומר לפני שמתחילים לכתוב.
* בדיקות מקיפות לכל הפונקציות הדרושות.
   * אין צורך לבדוק את  אופרטור הפלט - כיוון שלא הגדרנו את הפורמט.
   * אין צורך לבדוק מצבים לא חוקיים של פונקציית לקיחת הקלפים `take_cards`.
  
כיתבו את כל הקבצים הדרושים כך שהפקודות הבאות יעבדו ללא שגיאות:

<div dir='ltr'>

    make demo1 && ./demo1
    make demo2 && ./demo2
	make test && ./test

</div>

מומלץ גם להריץ:

<div dir='ltr'>

    make tidy
    make valgrind

</div>

אין לשנות קבצים קיימים אלא רק להוסיף קבצים חדשים.

בהצלחה
</div>